<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="refresh" content="30">
    <title>system monitoring dashboard</title>
    <link rel="stylesheet" href="template.css">
    <script src="https://bernii.github.io/gauge.js/dist/gauge.min.js"></script>
</head>
<body>

    <header>
        <h1>Dashboard HTML</h1>
        <p>Generated at: {{ timestamp }}</p>
         <p>The page will automatically refresh every 30 seconds.</p>
    </header>

    <main class="dashboard-grid">

        <section id="system" class="card">
            <h2>System Information</h2>
            <ul>
                <li>Hostname: {{ hostname }}</li>
                <li>Operating System: {{ os_name }}</li>
                <li>Uptime: {{ uptime }}</li>
                <li>Number of Users: {{ user_count }}</li>
            </ul>
        </section>

        <section id="CPU" class="card">
        <h2>CPU Information</h2>
        <canvas id="cpuGauge" width="200" height="160"></canvas>
        <ul>
            <li>CPU cores: {{ cpu_cores }}</li>
            <li>CPU frequency: {{ cpu_frequency }}Mhz</li>
            <li>CPU usage: {{ cpu_usage }}</li>
        </ul>
        </section>
    
        <section id="Memory" class="card">
        <h2>Memory</h2>
        <canvas id="ramGauge" width="200" height="160"></canvas>
        <ul>
            <li>Total RAM: {{ total_ram }}GB</li>
            <li>Used RAM: {{ used_ram }}GB</li>
            <li>RAM usage: {{ ram_usage }}</li>
        </ul>
        </section>
        <section id="advanced" class="card">
        <h2>Advanced System Analysis</h2>
        <ul>
            <li>Load Average (1min / 5min / 15min): {{ load_avg }}</li>
            <li>CPU Usage per Core:
                <ul>
                {{ cpu_per_core }}
                </ul>
            </li>
        </ul>
        </section>


        <section id="Network" class="card">
        <h2>Network</h2>
        <ul>
            <li>Address IP: {{ ip_address }}</li>
        </ul>
        </section>

        <section id="Processes" class="card">
        <h2>Processes</h2>
        <ul>
            <li>Top 1 Processe: {{ top_process_1 }}</li>
            <li>Top 2 Processe: {{ top_process_2 }}</li>
            <li>Top 3 Processe: {{ top_process_3 }}</li>
        </ul>
        </section>

        <section id="Files" class="card">
        <h2>Files Statistics</h2>
        <ul>
            <li>Total Files: {{ total_files }}</li>
            <li>Total Size: {{ total_size }}</li>
        {{ file_stats }}
        </ul>
        </section>

        <section id="LargestFiles" class="card">
        <h2>Top 5 Largest Files</h2>
        {{ largest_files }}
        </section>



    </main>

    <footer>
        <p>Dashboard generated by Python Monitoring Script</p>

    </footer>
    <script>
        // Options de la gauge
        const CPU_USAGE = Number("{{ cpu_usage_value }}");
        const RAM_USAGE = Number("{{ ram_usage_value }}");
        var opts = {
            angle: 0,
            lineWidth: 0.2,
            radiusScale: 1,
            pointer: {
                length: 0.6,
                strokeWidth: 0.035,
                color: '#000000'
            },
            limitMax: false,
            limitMin: false,
            colorStart: '#6FADCF',
            colorStop: '#8FC0DA',
            strokeColor: '#E0E0E0',
            generateGradient: true,
            highDpiSupport: true
      };

    // CPU Gauge
        var cpuTarget = document.getElementById('cpuGauge');
        var cpuGauge = new Gauge(cpuTarget).setOptions(opts);
        cpuGauge.maxValue = 100;
        cpuGauge.setMinValue(0);
        cpuGauge.animationSpeed = 32;
        cpuGauge.set(CPU_USAGE);

    // RAM Gauge
        var ramTarget = document.getElementById('ramGauge');
        var ramGauge = new Gauge(ramTarget).setOptions(opts);
        ramGauge.maxValue = 100;
        ramGauge.setMinValue(0);
        ramGauge.animationSpeed = 32;
        ramGauge.set(RAM_USAGE);
    </script>



</body>
</html>